<!Doctype html>
<html>

<head>
    <title>Airblue Tools Management App</title>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='./css/materialize.min.css' rel="stylesheet" type="text/css">
    <link href="./css/styles.css" rel="stylesheet" type="text/css">

</head>

<body>
    <div id=app>
        <header>
            <!-- Dropdown Structure -->
            <ul id="dropdown1" class="dropdown-content">
                <li><a href="#!" @click='changeApp("tool-app")'>Tools</a></li>
                <li><a href="#!" @click='changeApp("pol-app")'>P.O.L</a></li>
                <li><a href="#!" @click='changeApp("consumable-app")'>Consumables</a></li>
            </ul>
            <div class="navbar-fixed">
                <nav>
                    <div class="nav-wrapper white darken-4">
                        <a href="#!" class="brand-logo right"><span style="color: #828282; font-weight: 200;">air</span><span style="color: #252f86; font-weight: 800;">blue</span></a>
                        <ul class="left">
                            <!-- Dropdown Trigger -->
                            <li><a style="color: #252f86;" href="#!" @click='changeApp("dashboard-app")'>DASHBOARD</a></li>
                            <li><a style="color: #252f86;" class="dropdown-button" href="#!" data-activates="dropdown1">CATEGORY<i class="material-icons right">arrow_drop_down</i></a></li>
                            <li><a style="color: #252f86;" href="#about" >ABOUT</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>

        <main>
            <transition name="slide-fade" mode="out-in">
                <component :is="app" :db-loc="dbLoc" @changeapp="changeApp"></component>
            </transition>
        </main>
    </div>
    <template id="dashboard-app">
        <div v-if="(typeof dbLoc) === 'undefined'">
            <div class="center-align">
            <h1><span style="color: #828282; font-weight: 200;">air</span><span style="color: #252f86; font-weight: 800;">blue</span></h1>
            <div class="card-panel">
                <div class="file-field input-field">
                    <div class="btn">
                        <span>File</span>
                        <input id='file' type="file" name="file" @change.prevent="getDir" webkitdirectory directory multiple>
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text" placeholder="Please select a location to save your Database or alternatively you can provide location to Import your saved Database from">
                    </div>
                </div>
                </div>
            </div>
        </div>
        <div v-else>
            <div class="row center-align">
                <div class="card-panel">
                    <h1><span style="color: #828282; font-weight: 200;">air</span><span style="color: #252f86; font-weight: 800;">blue</span></h1>
                    <h2>Welcome to Shelf Life Management App</h2>
                    <p>Below are some highlights from inventory, Click on a Category in order to update or view items</p>
                </div>
            </div>
    <div class="row">
        <div class="col s4">
            <div class="card-panel hoverable" style="cursor: pointer" @click="changeApp('tool-app')">
                <div class="card-content">
                    <h4 class="center-align">TOOLS</h4>
                    <p>Total number of items in this Category <span data-badge-caption="items" class="new badge blue darken-1">{{tools.five+tools.ten+tools.fifteen+tools.rest}}</span></p>
                    <p><span data-badge-caption="items" class="new badge red darken-1">{{tools.five}}</span> Due with in 5 days or Expired</p>
                    <p><span data-badge-caption="items" class="new badge orange darken-1">{{tools.ten}}</span> Due with in 10 days</p>
                    <p><span data-badge-caption="items" class="new badge yellow darken-1">{{tools.fifteen}}</span> Due with in 15 days</p>
                </div>
            </div>
        </div>
        <div class="col s4">
            <div class="card-panel hoverable" style="cursor: pointer" @click="changeApp('consumable-app')">
                <div class="card-content">
                    <h4 class="center-align">CONSUMABLES</h4>
                    <p>Total number of items in this Category <span data-badge-caption="items" class="new badge blue darken-1">{{consumables.five+consumables.ten+consumables.fifteen+consumables.rest}}</span></p>
                    <p><span data-badge-caption="items" class="new badge red darken-1">{{consumables.five}}</span> Due with in 5 days or Expired</p>
                    <p><span data-badge-caption="items" class="new badge orange darken-1">{{consumables.ten}}</span> Due with in 10 days</p>
                    <p><span data-badge-caption="items" class="new badge yellow darken-1">{{consumables.fifteen}}</span> Due with in 15 days</p>
                </div>
            </div>
        </div>
        <div class="col s4">
            <div class="card-panel hoverable" style="cursor: pointer" @click="changeApp('pol-app')">
                <div class="card-content">
                    <h4 class="center-align">P.O.L</h4>
                    <p>Total number of items in this Category <span data-badge-caption="items" class="new badge blue darken-1">{{pols.five+pols.ten+pols.fifteen+pols.rest}}</span></p>
                    <p><span data-badge-caption="items" class="new badge red darken-1">{{pols.five}}</span> Due with in 5 days or Expired</p>
                    <p><span data-badge-caption="items" class="new badge orange darken-1">{{pols.ten}}</span> Due with in 10 days</p>
                    <p><span data-badge-caption="items" class="new badge yellow darken-1">{{pols.fifteen}}</span> Due with in 15 days</p>
                </div>
            </div>
        </div>
    </div>
</div>
    </template>
    <template id="tool-app">

        <div class="row">
            <div class="col s2">
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <form v-if="mode === 'update'" @submit.prevent="updateTool(editIndex)" id="tools-form" class="col s12">
                                <div class="row">
                                    <p>You are updating {{tools[editIndex].description}} {{tools[editIndex]['ABQ SNo.']}} </p>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex]['Calibration Date']" id="calib-dt" type="date" class="datepicker" name="calibdt">
                                        <label for="calib-dt">Calibration Date</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex]['Due Date']" id="due-dt" type="date" class="datepicker" name="duedt">
                                        <label for="due-dt">Due date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Update & Save"><i class="material-icons">update</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else-if="mode === 'edit'" @submit.prevent="editTool(editIndex)" id="tools-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex].partnumber" id="part-number" type="text" class="" name="partnumber">
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex].description" id="description" type="text" class="" name="description">
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex]['ABQ SNo.']" id="abq-sno" type="text" class="" name="abqsno">
                                        <label for="abq-sno">ABQ SNo.</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex]['Calibration Date']" id="calib-dt" type="date" class="datepicker" name="calibdt">
                                        <label for="calib-dt">Calibration Date</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="tools[editIndex]['Due Date']" id="due-dt" type="date" class="datepicker" name="duedt">
                                        <label for="due-dt">Due date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Edit & Save"><i class="material-icons">mode_edit</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else @submit.prevent="addTool()" id="tools-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input id="part-number" type="text" class="" name="partnumber" required>
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="description" type="text" class="" name="description" required>
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="abq-sno" type="text" class="" name="abqsno" required>
                                        <label for="abq-sno">ABQ SNo.</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="location" type="text" class="" name="location" required>
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="calib-dt" type="date" class="datepicker" name="calibdt" required>
                                        <label for="calib-dt">Calibration Date</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="due-dt" type="date" class="datepicker" name="duedt" required>
                                        <label for="due-dt">Due date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Add new Tool"><i class="material-icons">add</i></button>
                                        <button type="reset" class="btn waves-effect tooltipped" data-position="top" data-delay="50" data-tooltip="Reset Form"><i class="material-icons">clear_all</i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s10">
                <div class="card-panel printable" style="background-color: #252f86;">
                    <div class="card-content">
                        <h5 class="center-align" style="color: white; background-color: #252f86;">{{heading}}</h5>
                    </div>
                </div>
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <div class="input-field col s6">
                                <input id=searchquery type="text" name="searchquery" v-model="searchQuery">
                                <label for="searchquery">Search</label>
                            </div>
                            <div class="col s4">
                                <label>Filter</label>
                                <select class="browser-default" id=colorquery name="colorquery" v-model="colorQuery">
                                    <option value="" selected disabled>Choose your option</option>
                                    <option value="" >All</option>
                                    <option value="red darken-1">Red (Less then 5 days)</option>
                                    <option value="orange darken-1">Orange (less then 10 days)</option>
                                    <option value="yellow darken-1">Yellow (less then 15 days)</option>
                                </select>
                            </div>
                            <div class="col s2">
                                <button onclick="Print()" class="btn-large waves-effect white darken-1 tooltipped" style="margin-top: 16px;" data-position="top" data-delay="50" data-tooltip="Print this Table"><i class="material-icons" style="color: black;">print</i></button>
                            </div>
                        </div>
                        <tool-table :data="tools" :columns="columns" :db="DB" :id="id" :mode="mode" :filter-key="searchQuery" :color-key="colorQuery" :due-item="dueItem" @updateparent="updateParent"></tool-table>
                        <!-- Modal Structure -->
                        <div v-if="editIndex !== null && editIndex >= 0" id="modal1" class="modal">
                            <div class="modal-content">
                                <div class="card-panel">
                                    <h3 class="center-align">{{tools[editIndex].description}}</h3>
                                    <hr></hr>
                                    <h5 class="center-align">PN: {{tools[editIndex].partnumber}} &emsp;&emsp; SN: {{tools[editIndex]['ABQ SNo.']}}</h5>
                                </div>
                                <div class="card-panel overflow-control">
                                    <table class="highlight bordered centered">
                                        <thead>
                                            <tr>
                                                <th>Date Updated</th>
                                                <th>Location</th>
                                                <th>Calibration Date</th>
                                                <th>Due Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(history, index) in tools[editIndex].historyArr">
                                                <td>{{history['Date Updated']}}</td>
                                                <td>{{history.location}}</td>
                                                <td>{{history['Calibration Date']}}</td>
                                                <td>{{history['Due Date']}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</template>
    <template id="consumable-app">

        <div class="row">
            <div class="col s2">
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <form v-if="mode === 'update'" @submit.prevent="updateConsumable(editIndex)" id="consumables-form" class="col s12">
                                <div class="row">
                                    <p>You are updating {{consumables[editIndex].description}} Batch#{{consumables[editIndex]['Batch#']}} </p>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['Batch#']" id="batch" type="text" class="" name="batch">
                                        <label for="batch">Batch#</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['P.O']" id="po" type="text" class="" name="po">
                                        <label for="po">P.O</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['S.L.E Date']" id="sle" type="date" class="datepicker" name="sle">
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Update & Save"><i class="material-icons">update</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else-if="mode === 'edit'" @submit.prevent="editConsumable(editIndex)" id="consumables-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex].description" id="description" type="text" class="" name="description">
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex].partnumber" id="part-number" type="text" class="" name="partnumber">
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['Batch#']" id="batch" type="text" class="" name="batch">
                                        <label for="batch">Batch#</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['P.O']" id="po" type="text" class="" name="po">
                                        <label for="po">P.O</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="consumables[editIndex]['S.L.E Date']" id="sle" type="date" class="datepicker" name="sle">
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Edit & Save"><i class="material-icons">mode_edit</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else @submit.prevent="addConsumable()" id="consumables-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input id="description" type="text" class="" name="description" required>
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="part-number" type="text" class="" name="partnumber" required>
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="batch" type="text" class="" name="batch" required>
                                        <label for="batch">Batch#</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="po" type="text" class="" name="po" required>
                                        <label for="po">P.O</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="location" type="text" class="" name="location" required>
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="sle" type="date" class="datepicker" name="sle" required>
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Add new consumable"><i class="material-icons">add</i></button>
                                        <button type="reset" class="btn waves-effect tooltipped" data-position="top" data-delay="50" data-tooltip="Reset Form"><i class="material-icons">clear_all</i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s10">
                <div class="card-panel printable" style="background-color: #252f86;">
                    <div class="card-content">
                        <h5 class="center-align" style="color: white; background-color: #252f86;">{{heading}}</h5>
                    </div>
                </div>
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <div class="input-field col s6">
                                <input id=searchquery type="text" name="searchquery" v-model="searchQuery">
                                <label for="searchquery">Search</label>
                            </div>
                            <div class="col s4">
                                <label>Filter</label>
                                <select class="browser-default" id=colorquery name="colorquery" v-model="colorQuery">
                                    <option value="" selected disabled>Choose your option</option>
                                    <option value="" >All</option>
                                    <option value="red darken-1">Red (Less then 5 days)</option>
                                    <option value="orange darken-1">Orange (less then 10 days)</option>
                                    <option value="yellow darken-1">Yellow (less then 15 days)</option>
                                </select>
                            </div>
                            <div class="col s2">
                                <button onclick="Print()" class="btn-large waves-effect white darken-1 tooltipped" style="margin-top: 16px;" data-position="top" data-delay="50" data-tooltip="Print this Table"><i class="material-icons" style="color: black;">print</i></button>
                            </div>
                        </div>
                        <tool-table :data="consumables" :columns="columns" :db="DB" :id="id" :mode="mode" :filter-key="searchQuery" :color-key="colorQuery" :due-item="dueItem" @updateparent="updateParent"></tool-table>
                        <!-- Modal Structure -->
                        <div v-if="editIndex !== null && editIndex >= 0" id="modal1" class="modal">
                            <div class="modal-content">
                                <div class="card-panel">
                                    <h3 class="center-align">{{consumables[editIndex].description}}</h3>
                                    <hr></hr>
                                    <h5 class="center-align">PN: {{consumables[editIndex].partnumber}} &emsp;&emsp; Batch#: {{consumables[editIndex]['Batch#']}}</h5>
                                </div>
                                <div class="card-panel overflow-control">
                                    <table class="highlight bordered centered">
                                        <thead>
                                            <tr>
                                                <th>Date Updated</th>
                                                <th>Location</th>
                                                <th>P.O</th>
                                                <th>S.L.E Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(history, index) in consumables[editIndex].historyArr">
                                                <td>{{history['Date Updated']}}</td>
                                                <td>{{history.location}}</td>
                                                <td>{{history['P.O']}}</td>
                                                <td>{{history['S.L.E Date']}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</template>
    <template id="pol-app">

        <div class="row">
            <div class="col s2">
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <form v-if="mode === 'update'" @submit.prevent="updatePol(editIndex)" id="pols-form" class="col s12">
                                <div class="row">
                                    <p>You are updating {{pols[editIndex].description}} with GRN# {{pols[editIndex]['GRN#']}} </p>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex]['GRN#']" id="grn" type="text" class="" name="grn">
                                        <label for="grn">GRN#</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex]['S.L.E Date']" id="sle" type="date" class="datepicker" name="sle">
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Update & Save"><i class="material-icons">update</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else-if="mode === 'edit'" @submit.prevent="editPol(editIndex)" id="pols-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex].description" id="description" type="text" class="" name="description">
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex].partnumber" id="part-number" type="text" class="" name="partnumber">
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex].location" id="location" type="text" class="" name="location">
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex]['GRN#']" id="grn" type="text" class="" name="grn">
                                        <label for="grn">GRN#</label>
                                    </div>
                                    <div class="input-field">
                                        <input v-bind:value="pols[editIndex]['S.L.E Date']" id="sle" type="date" class="datepicker" name="sle">
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Edit & Save"><i class="material-icons">mode_edit</i></button>
                                        <a @click="cancel()" class="btn waves-effect orange darken-1 tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Cancel"><i class="material-icons">cancel</i></a>
                                    </div>
                                </div>
                            </form>
                            <form v-else @submit.prevent="addPol()" id="pols-form" class="col s12">
                                <div class="row">
                                    <div class="input-field">
                                        <input id="description" type="text" class="" name="description" required>
                                        <label for="description">Description</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="part-number" type="text" class="" name="partnumber" required>
                                        <label for="part-number">Part Number</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="location" type="text" class="" name="location" required>
                                        <label for="location">Location</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="grn" type="text" class="" name="grn" required>
                                        <label for="grn">GRN#</label>
                                    </div>
                                    <div class="input-field">
                                        <input id="sle" type="date" class="datepicker" name="sle" required>
                                        <label for="sle">S.L.E Date</label>
                                    </div>
                                    <div class="input-field">
                                        <button type="submit" class="btn waves-effect tooltipped center-align" data-position="top" data-delay="50" data-tooltip="Add new pol"><i class="material-icons">add</i></button>
                                        <button type="reset" class="btn waves-effect tooltipped" data-position="top" data-delay="50" data-tooltip="Reset Form"><i class="material-icons">clear_all</i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s10">
                <div class="card-panel printable" style="background-color: #252f86;">
                    <div class="card-content">
                        <h5 class="center-align" style="color: white;">{{heading}}</h5>
                    </div>
                </div>
                <div class="card-panel">
                    <div class="card-content">
                        <div class="row">
                            <div class="input-field col s6">
                                <input id=searchquery type="text" name="searchquery" v-model="searchQuery">
                                <label for="searchquery">Search</label>
                            </div>
                            <div class="col s4">
                                <label>Filter</label>
                                <select class="browser-default" id=colorquery name="colorquery" v-model="colorQuery">
                                    <option value="" selected disabled>Choose your option</option>
                                    <option value="" >All</option>
                                    <option value="red darken-1">Red (Less then 5 days)</option>
                                    <option value="orange darken-1">Orange (less then 10 days)</option>
                                    <option value="yellow darken-1">Yellow (less then 15 days)</option>
                                </select>
                            </div>
                            <div class="col s2">
                                <button onclick="Print()" class="btn-large waves-effect white darken-1 tooltipped" style="margin-top: 16px;" data-position="top" data-delay="50" data-tooltip="Print this Table"><i class="material-icons" style="color: black;">print</i></button>
                            </div>
                        </div>
                        <tool-table :data="pols" :columns="columns" :db="DB" :id="id" :mode="mode" :filter-key="searchQuery" :color-key="colorQuery" :due-item="dueItem" @updateparent="updateParent"></tool-table>
                        <!-- Modal Structure -->
                        <div v-if="editIndex !== null && editIndex >= 0" id="modal1" class="modal">
                            <div class="modal-content">
                                <div class="card-panel">
                                    <h3 class="center-align">{{pols[editIndex].description}}</h3>
                                    <hr></hr>
                                    <h5 class="center-align">PN: {{pols[editIndex].partnumber}} &emsp;&emsp; SN: {{pols[editIndex]['GRN#']}}</h5>
                                </div>
                                <div class="card-panel overflow-control">
                                    <table class="highlight bordered centered">
                                        <thead>
                                            <tr>
                                                <th>Date Updated</th>
                                                <th>Location</th>
                                                <th>GRN#</th>
                                                <th>S.L.E Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(history, index) in pols[editIndex].historyArr">
                                                <td>{{history['Date Updated']}}</td>
                                                <td>{{history.location}}</td>
                                                <td>{{history['GRN#']}}</td>
                                                <td>{{history['S.L.E Date']}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</template>
    <template id="table-template">
        <table class="highlight bordered centered printable">
            <thead>
                <tr>
                    <th v-for="key in columns" @click="sortBy(key)" :class="{ active: sortKey == key }">
                        {{ key | capitalize }}
                        <span class="arrow" :class="sortOrders[key] > 0 ? 'asc' : 'dsc'">
          </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(entry, index) in filteredData">
                    <td v-for="key in columns" :class="filteredData[index].color">
                        {{entry[key]}}
                    </td>
                    <td v-if="id === filteredData[index]._id && (mode === 'edit' || mode === 'update')">

                    </td>
                    <td v-else>
                        <button @click="initiateView(index)" class="btn-floating waves-effect blue darken1 tooltipped" style="line-height:0; width:30px; height:30px" data-position="top" data-delay="50" data-tooltip="View Details"><i class="material-icons" style="font-size:15px; line-height:5px;">search</i></button>
                        <button @click="initiateUpdateForm(index)" class="btn-floating waves-effect green darken-1 tooltipped" style="line-height:0; width:30px; height:30px" data-position="top" data-delay="50" data-tooltip="Update"><i class="material-icons" style="font-size:15px; line-height:5px;">update</i></button>
                        <button @click="initiateEditForm(index)" class="btn-floating waves-effect orange darken-1 tooltipped" style="line-height:0; width:30px; height:30px" data-position="top" data-delay="50" data-tooltip="Edit"><i class="material-icons" style="font-size:15px; line-height:5px;">mode_edit</i></button>
                        <button @click="initiateDelete(index)" class="btn-floating waves-effect red darken-1 tooltipped" style="line-height:0; width:30px; height:30px" data-position="top" data-delay="50" data-tooltip="Delete"><i class="material-icons" style="font-size:15px; line-height:5px;">delete</i></button>
                    </td>
                </tr>
            </tbody>
        </table>
    </template>

    <!--About Modal -->
    <div id="about" class="modal">
        <div class="modal-content center-align">
            <h1>About</h1>
            <h4><span style="color: #828282; font-weight: 200;">air</span><span style="color: #252f86; font-weight: 800;">blue</span> Shelf Life Management App</h4>
            <p>Release Version 1.0.0
                <br> Release Date: Thu Jul 06 2017
                <br> Released under MIT license & is free to use and copy.</p>
            <p>Airblue's Logo is a registered Trademark & All Rights reserved by it's owners</p>
            <p>Made with &hearts; Using JavaScript & Vue.Js 2 by: <a href="javascript:;" onclick="openUrl('https://nawazishali.github.io')">Nawazish Ali</a> </p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>


    <script type="text/javascript" src="js-libraries/jquery-2.2.3.min.js"></script>
    <script src="js-libraries/materialize.js" type="text/javascript"></script>
    <script src="js-libraries/vue.js" type="text/javascript"></script>
    <script src="js-app/app.js" type="text/javascript"></script>
</body>










</html>
